var Keyboard=function(c,d){var e=this;d=void 0===d?{}:d;c=c["split"]?document["querySelector"](c):c;this["listeners"]=["click","focusin","input"];this["keyboardLayout"]={"en-US":["1 2 3 4 5 6 7 8 9 0 {@backspace}"["split"](" "),"qwertyuiop+#"["split"](""),"asdfghjkl_"["split"](""),"@zxcvbnm,.-"["split"](""),["{@shift}","{@space}","{@globe}"]],"ru-RU":["1 2 3 4 5 6 7 8 9 0 {@backspace}"["split"](" "),"\u0439\u0446\u0443\u043a\u0435\u043d\u0433\u0448\u0449\u0437\u0445\u044a+#"["split"](""),"\u0444\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u044d_"["split"](""),
"@\u044f\u0447\u0441\u043c\u0438\u0442\u044c\u0431\u044e\u0451,.-"["split"](""),["{@shift}","{@space}","{@globe}"]]};this["numpadLayout"]=[["1","2","3","{@backspace}"],["4","5","6","-"],["7","8","9","+"],["*","0","#","@"]];d=this["validateOptions"](d||this["defaults"]());var f=c["parentElement"],g=document["createElement"]("div");g["classList"]["add"]("keyboard","hidden");this["instance"]={"selector":c,"keyboard":g,"parent":f,"position":d["position"],"uppercase":d["uppercase"]||!1,"language":d["language"],
"onShow":d["onShow"],"onHide":d["onHide"],"onChange":d["onChange"],"onLanguageChange":d["onLanguageChange"],"numpad":d["numpad"]||!1};this["create"](this["instance"]);this["listeners"]["forEach"](function(h){window["addEventListener"](h,function(i){return e["eventHandler"](i,e["instance"])})});f["appendChild"](g)};Keyboard["prototype"]["create"]=function(j){var k=this["createControls"](j);j["keyboard"]["innerHTML"]=k;this["calculatePosition"](j)};
Keyboard["prototype"]["createControls"]=function(l){var m=this,n=[];(l["numpad"]?this["numpadLayout"]:this["keyboardLayout"][l["language"]])["forEach"](function(o){var p=document["createElement"]("div");p["classList"]["add"]("keyboard-item");o["forEach"](function(q){var o=document["createElement"]("button");o["classList"]["add"]("keyboard-button");m["exist"](["{@space}","{@globe}","{@backspace}","{@shift}"],q)&&(q=q["replace"](/[^a-z]/g,""));switch(q){case "shift":o["innerHTML"]='<span class="fa fa-arrow-up"></span>';
break;case "backspace":o["innerHTML"]='<span class="fa fa-long-arrow-left"></span>';break;case "space":o["innerHTML"]="&nbsp;";o["style"]["width"]="75%";break;case "globe":o["innerHTML"]='<span class="fa fa-globe"></span>';break;default:o["textContent"]=l["uppercase"]?q["toUpperCase"]():q}o["dataset"]["trigger"]=q;p["appendChild"](o)});n["push"](p["outerHTML"])});return n["join"]("")};
Keyboard["prototype"]["eventHandler"]=function(s,t){var u=s["type"],v=s["path"],w=s["target"],x=t["keyboard"],y=t["selector"],z=x["classList"]["contains"]("hidden");v=v["includes"](x);if("focusin"===u)return w===y&&this["show"](t);if(z)w===y&&this["show"](t);else if("click"===u&&v){if(s["preventDefault"](),u="BUTTON"===w["nodeName"]?w["dataset"]["trigger"]:null)switch(u){case "space":this["setInputValue"](y," ",t);t["onChange"]&&t["onChange"](this,t);break;case "shift":t["uppercase"]=!t["uppercase"];
this["create"](t);break;case "backspace":this["setInputValue"](y,null,t,!0);t["onChange"]&&t["onChange"](this,t);break;case "globe":y=Object["keys"](this["keyboardLayout"]);u=y["indexOf"](t["language"])+1;u=u>=y["length"]?0:u;t["language"]=y[u];this["create"](t);t["onLanguageChange"]&&t["onLanguageChange"]();break;default:this["setInputValue"](y,u,t),t["onChange"]&&t["onChange"](this,t)}}else w!==y&&this["hide"](t)};
Keyboard["prototype"]["setInputValue"]=function(A,B,C,D){(void 0===D?0:D)?A["value"]=A["value"]["slice"](0,-1):(D=A["getAttribute"]("maxlength"),A["value"]["length"]===+D&&D||(A["value"]+=C["uppercase"]?B["toUpperCase"]():B))};Keyboard["prototype"]["show"]=function(E){E["keyboard"]["classList"]["remove"]("hidden");this["calculatePosition"](E);E["onShow"]&&E["onShow"](E)};Keyboard["prototype"]["hide"]=function(F){F["keyboard"]["classList"]["add"]("hidden");F["onHide"]&&F["onHide"](F)};
Keyboard["prototype"]["calculatePosition"]=function(G){var H=G["keyboard"],I=G["position"],J=I["top"],K=I["left"];I=I["center"];G=G["selector"]["getBoundingClientRect"]();var L=H["getBoundingClientRect"]();H["setAttribute"]("style","\n      top: "+(J?G["top"]-L["height"]:G["top"]+G["height"])+"px;\n      left: "+(K?G["left"]:I?G["left"]-L["width"]/2+G["width"]/2:G["right"]-L["width"])+"px;\n    ")};Keyboard["prototype"]["defaults"]=function(){return{"uppercase":!1}};
Keyboard["prototype"]["validateOptions"]=function(M){var N=M["position"],O=M["uppercase"],P=M["language"],Q=M["numpad"];if(N){if(!this["exist"]("top right;top left;top center;bottom right;bottom left;bottom center"["split"](";"),N))throw Error("Custom positioning is invalid.");M["position"]=this["setPosition"](N)}else M["position"]=this["setPosition"]("bottom left");["onChange","onShow","onHide","onLanguageChange"]["forEach"](function(R){M[R]="function"===typeof M[R]&&M[R]});if("boolean"!==typeof O&&
O)throw Error("Uppercase value needs to be boolean.");if("boolean"!==typeof Q&&Q)throw Error("Numpad value needs to be boolean.");if(P){if(!this["exist"](["en-US","ru-RU","de-DE"],P))throw Error("Custom language is invalid.");M["language"]=P}else M["language"]="en-US";return M};Keyboard["prototype"]["exist"]=function(S,T){S=void 0===S?{}:S;return S["some"](function(U){return U===T})};Keyboard["prototype"]["setPosition"]=function(V){var W={};V=V["split"](" ");W[V[0]]=1;W[V[1]]=1;return W};
Keyboard["prototype"]["dispose"]=function(){var X=this,Y=this["instance"]["keyboard"];this["listeners"]["forEach"](function(Z){window["removeEventListener"](Z,X["eventHandler"])});Y["remove"]()};